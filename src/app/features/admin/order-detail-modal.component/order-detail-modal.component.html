<div class="space-y-4">
  <div class="space-y-3" *ngIf="orden">
    <div class="bg-white rounded-lg border border-gray-200 p-4">
      <div class="flex items-center justify-between mb-3">
        <div>
          <h3 class="text-sm font-semibold text-gray-700 mb-1">Orden</h3>
          <p class="text-lg font-bold text-gray-900">#{{ orden.numeroOrden }}</p>
        </div>
        <span class="px-3 py-1 rounded-full text-xs font-semibold"
              [ngClass]="getStatusBadgeClass(orden.estado)">
          {{ getStatusText(orden.estado) }}
        </span>
      </div>
      <div class="grid grid-cols-2 gap-3 text-xs">
        <div>
          <p class="text-gray-600 font-medium mb-0.5">Fecha de Orden</p>
          <p class="text-gray-900 font-semibold">{{ formatDate(orden.createdAt) }}</p>
        </div>
        <div>
          <p class="text-gray-600 font-medium mb-0.5">Límite de Pago</p>
          <p class="text-gray-900 font-semibold">{{ formatDate(orden.fechaLimitePago) }}</p>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-lg border border-gray-200 p-4">
      <h3 class="text-sm font-semibold text-gray-700 mb-3">Cliente</h3>
      <div class="space-y-2 text-xs">
        <div class="flex items-center gap-2">
          <i class="pi pi-user text-gray-400"></i>
          <span class="text-gray-600">ID:</span>
          <span class="text-gray-900 font-semibold">{{ orden.usuarioId }}</span>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-lg border border-gray-200 p-4">
      <h3 class="text-sm font-semibold text-gray-700 mb-3">Productos</h3>
      <div class="space-y-2">
        <div *ngFor="let item of orden.productos" class="flex items-center justify-between py-2 border-b border-gray-100 last:border-0">
          <div class="flex-1">
            <p class="text-xs font-semibold text-gray-900">{{ item.nombre }}</p>
            <p class="text-xs text-gray-500 mt-0.5">{{ item.cantidad }} x ${{ formatPrice(item.precioUnitario) }}</p>
          </div>
          <p class="text-xs font-bold text-gray-900 text-right">${{ formatPrice(item.subtotal) }}</p>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-lg border border-gray-200 p-4">
      <h3 class="text-sm font-semibold text-gray-700 mb-3">Resumen de Pago</h3>
      <div class="space-y-2 text-xs">
        <div class="flex justify-between items-center pb-2 border-b border-gray-100">
          <span class="text-gray-600">Subtotal</span>
          <span class="text-gray-900 font-semibold">${{ formatPrice(orden.subtotal || 0) }}</span>
        </div>
        <div class="flex justify-between items-center pb-2 border-b border-gray-100">
          <span class="text-gray-600">Impuestos</span>
          <span class="text-gray-900 font-semibold">${{ formatPrice(orden.impuestos || 0) }}</span>
        </div>
        <div *ngIf="orden.costoEnvio" class="flex justify-between items-center pb-2 border-b border-gray-100">
          <span class="text-gray-600">Envío</span>
          <span class="text-gray-900 font-semibold">${{ formatPrice(orden.costoEnvio) }}</span>
        </div>
        <div *ngIf="orden.descuentos" class="flex justify-between items-center pb-2 border-b border-gray-100">
          <span class="text-gray-600">Descuentos</span>
          <span class="text-gray-900 font-semibold">-${{ formatPrice(orden.descuentos) }}</span>
        </div>
        <div class="flex justify-between items-center pt-2">
          <span class="text-gray-800 font-bold">Total</span>
          <span class="text-lg font-bold text-gray-900">${{ formatPrice(orden.total || 0) }}</span>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-lg border border-gray-200 p-4">
      <h3 class="text-sm font-semibold text-gray-700 mb-3">Dirección de Envío</h3>
      <div class="space-y-2 text-xs text-gray-700">
        <p class="font-semibold">{{ orden.direccionEnvio.nombreCompleto }}</p>
        <p>{{ orden.direccionEnvio.calle }} {{ orden.direccionEnvio.numeroExterior }}
          <span *ngIf="orden.direccionEnvio.numeroInterior">{{ orden.direccionEnvio.numeroInterior }}</span>
        </p>
        <p>{{ orden.direccionEnvio.colonia }}, {{ orden.direccionEnvio.ciudad }}, {{ orden.direccionEnvio.estado }}</p>
        <p>CP: {{ orden.direccionEnvio.codigoPostal }}</p>
        <p>Tel: {{ orden.direccionEnvio.telefono }}</p>
        <p *ngIf="orden.direccionEnvio.referencias" class="text-gray-500 italic">Ref: {{ orden.direccionEnvio.referencias }}</p>
      </div>
    </div>

    <div class="bg-white rounded-lg border border-gray-200 p-4">
      <h3 class="text-sm font-semibold text-gray-700 mb-3">Información de Pago</h3>
      <div class="space-y-2 text-xs">
        <div class="flex justify-between">
          <span class="text-gray-600 font-medium">Método</span>
          <span class="text-gray-900 font-semibold">{{ orden.metodoPago }}</span>
        </div>
        <div *ngIf="orden.numeroReferencia" class="flex justify-between">
          <span class="text-gray-600 font-medium">Referencia</span>
          <span class="text-gray-900 font-semibold">{{ orden.numeroReferencia }}</span>
        </div>
        <div *ngIf="orden.fechaPago" class="flex justify-between">
          <span class="text-gray-600 font-medium">Fecha de Pago</span>
          <span class="text-gray-900 font-semibold">{{ formatDate(orden.fechaPago) }}</span>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-lg border border-gray-200 p-4">
      <h3 class="text-sm font-semibold text-gray-700 mb-3">Historial de Estados</h3>
      <div class="space-y-2">
        <div *ngIf="orden.fechaPreparacion" class="flex gap-2 text-xs pb-2 border-b border-gray-100">
          <i class="pi pi-check-circle text-green-600"></i>
          <div>
            <p class="text-gray-900 font-semibold">Preparación</p>
            <p class="text-gray-500">{{ formatDate(orden.fechaPreparacion) }}</p>
          </div>
        </div>
        <div *ngIf="orden.fechaEnvio" class="flex gap-2 text-xs pb-2 border-b border-gray-100">
          <i class="pi pi-check-circle text-green-600"></i>
          <div>
            <p class="text-gray-900 font-semibold">Envío</p>
            <p class="text-gray-500">{{ formatDate(orden.fechaEnvio) }}</p>
          </div>
        </div>
        <div *ngIf="orden.fechaEntrega" class="flex gap-2 text-xs">
          <i class="pi pi-check-circle text-green-600"></i>
          <div>
            <p class="text-gray-900 font-semibold">Entregado</p>
            <p class="text-gray-500">{{ formatDate(orden.fechaEntrega) }}</p>
          </div>
        </div>
        <div *ngIf="orden.razonCancelacion" class="flex gap-2 text-xs pt-2 border-t border-red-200 text-red-600">
          <i class="pi pi-times-circle"></i>
          <div>
            <p class="font-semibold">Cancelado</p>
            <p>{{ orden.razonCancelacion }}</p>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="orden.tracking" class="bg-white rounded-lg border border-gray-200 p-4">
      <h3 class="text-sm font-semibold text-gray-700 mb-3">Tracking</h3>
      <div class="flex items-center gap-2">
        <i class="pi pi-box text-gray-400 text-lg"></i>
        <div class="text-xs">
          <p class="text-gray-600 font-medium">Número de Guía</p>
          <p class="text-gray-900 font-semibold">{{ orden.tracking }}</p>
        </div>
      </div>
    </div>

    <div *ngIf="orden.notas" class="bg-blue-50 rounded-lg border border-blue-200 p-4">
      <h3 class="text-sm font-semibold text-blue-900 mb-2">Notas</h3>
      <p class="text-xs text-blue-800">{{ orden.notas }}</p>
    </div>
  </div>

  <div class="flex gap-2 pt-2 border-t border-gray-200 mt-4">
    <button (click)="cerrar()"
            class="flex-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded-lg font-semibold text-xs transition-colors duration-200">
      <i class="pi pi-times mr-1.5"></i>
      Cerrar
    </button>
  </div>
</div>
