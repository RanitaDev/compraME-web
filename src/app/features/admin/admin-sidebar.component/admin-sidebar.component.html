<aside class="admin-sidebar h-screen bg-white border-r border-gray-200
              shadow-sm transition-all duration-300 ease-in-out"
       [class.collapsed]="isCollapsed"
       [style.width]="isCollapsed ? '50px' : '240px'">

  <div class="sidebar-header flex items-center justify-between p-3 border-b border-gray-100">
    <button
      class="toggle-btn p-2 hover:bg-gray-50/10 rounded-md transition-colors duration-200 cursor-pointer"
      [class.hidden]="isCollapsed"
      (click)="toggleSidebar()"
      [attr.aria-label]="'Colapsar menú lateral'"
    >
      <i class="pi pi-angle-left text-gray-400 text-lg"></i>
    </button>
  </div>

  <nav class="sidebar-nav flex-1 overflow-y-auto py-2">
    <div class="space-y-1 px-2">
      <div *ngFor="let item of menuItems" class="menu-item-container">
        <p-button
          [text]="true"
          [rounded]="true"
          [styleClass]="'w-full p-2.5 transition-all duration-200 ' +
                        (item.isActive ? 'active' : '') +
                        (isCollapsed ? ' justify-content-center' : '')"
          (click)="onMenuItemClick(item)"
          [attr.aria-label]="item.label"
        >
          <ng-template pTemplate="content">
            <div class="flex items-center w-full"
                 [ngClass]="isCollapsed ? 'justify-center' : 'justify-between'">
              <div class="flex items-center gap-3">
                <i class="text-base transition-colors duration-200"
                   [class]="'pi ' + item.icon"
                   [class.text-black]="item.isActive"
                   [class.text-gray-300]="!item.isActive"></i>

                @if (!isCollapsed) {
                  <span class="text-sm transition-all duration-300"
                        [class.text-black]="item.isActive"
                        [class.font-medium]="item.isActive"
                        [class.text-gray-300]="!item.isActive">
                    {{ item.label }}
                  </span>
                }
              </div>
            </div>
          </ng-template>
        </p-button>

         @if(item.subItems && item.subItems.length > 0 && showSubMenu[item.id] && !isCollapsed) {
          <div
             class="submenu ml-6 mt-1 space-y-0.5 transition-all duration-300 ease-in-out"
             [@slideDown]>

          @for (subItem of item.subItems; track $index) {
            <button
              class="submenu-item w-full flex items-center space-x-3 p-2 rounded-md text-left transition-all duration-200 hover:bg-gray-50"
              [class.active]="subItem.isActive"
              (click)="onSubMenuItemClick(item.id, subItem)"
              [attr.aria-label]="subItem.label">

              <span class="text-sm transition-colors duration-200"
                [class.text-black]="subItem.isActive"
                [class.font-medium]="subItem.isActive"
                [class.text-gray-400]="!subItem.isActive"
              >
                {{ subItem.label }}
              </span>
            </button>
          }
          </div>
         }
      </div>
    </div>
  </nav>

   @if (isCollapsed) {
    <button
      class="expand-btn absolute top-6 -right-2.5 w-5 h-5 bg-white border
            border-gray-200 rounded-full flex items-center justify-center
              shadow-sm hover:shadow-md transition-all duration-200 z-10"
      (click)="toggleSidebar()"
      [attr.aria-label]="'Expandir menú lateral'"
    >
      <i class="pi pi-angle-right text-gray-400 text-lg"></i>
    </button>
   }
</aside>
