<div class="pending-order-modal bg-white">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="flex items-center justify-center h-40">
    <div class="text-center">
      <i class="pi pi-spin pi-spinner text-4xl text-gray-400 mb-2"></i>
      <p class="text-gray-600">Cargando orden...</p>
    </div>
  </div>

  <!-- Modal Content -->
  <div *ngIf="!isLoading && orden" class="space-y-6">
    <!-- Header -->
    <div class="text-center pb-4 border-b border-gray-200">
      <i class="pi pi-exclamation-triangle text-4xl text-orange-500 mb-3"></i>
      <h2 class="text-2xl font-bold text-gray-900">Orden Pendiente Detectada</h2>
      <p class="text-gray-600 mt-2">Ya tienes una orden en proceso. Compl칠tala antes de crear una nueva.</p>
    </div>

    <!-- Informaci칩n de la Orden -->
    <div class="bg-orange-50 border border-orange-200 rounded-lg p-4 space-y-3">
      <div class="flex items-center justify-between">
        <span class="text-gray-700 font-medium">N칰mero de Orden:</span>
        <span class="text-lg font-bold text-gray-900">{{ orden.numeroOrden }}</span>
      </div>

      <div class="flex items-center justify-between">
        <span class="text-gray-700 font-medium">Total a Pagar:</span>
        <span class="text-lg font-bold text-orange-600">${{ orden.total.toFixed(2) }}</span>
      </div>

      <div class="flex items-center justify-between">
        <span class="text-gray-700 font-medium">Estado:</span>
        <span class="px-3 py-1 bg-orange-200 text-orange-800 rounded-full text-sm font-medium">
          {{ orden.estado === 'pending' ? 'Pendiente de Pago' : 'Esperando Comprobante' }}
        </span>
      </div>

      <div *ngIf="tiempoRestante" class="flex items-center justify-between pt-3 border-t border-orange-200">
        <span class="text-gray-700 font-medium">Tiempo Restante:</span>
        <span class="text-lg font-bold text-orange-600">
          {{ tiempoRestante.dias }}d {{ tiempoRestante.horas }}h
        </span>
      </div>
    </div>

    <!-- Informaci칩n de Contacto -->
    <div class="bg-gray-50 rounded-lg p-4">
      <p class="text-sm text-gray-700 mb-3 font-medium">游늸 Se entregar치 en:</p>
      <div class="text-sm text-gray-600 space-y-1">
        <p>{{ orden.direccionEnvio.nombreCompleto }}</p>
        <p>{{ orden.direccionEnvio.calle }} {{ orden.direccionEnvio.numeroExterior }}</p>
        <p>{{ orden.direccionEnvio.colonia }}, {{ orden.direccionEnvio.ciudad }}</p>
        <p>{{ orden.direccionEnvio.estado }} {{ orden.direccionEnvio.codigoPostal }}</p>
        <p class="mt-2">游 {{ orden.direccionEnvio.telefono }}</p>
      </div>
    </div>

    <!-- Opciones -->
    <div class="space-y-3 pt-4 border-t border-gray-200">
      <button
        (click)="irACompletarPago()"
        class="w-full py-3 bg-gray-900 hover:bg-gray-800 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2"
      >
        <i class="pi pi-arrow-right"></i>
        Completar Pago de esta Orden
      </button>

      <button
        (click)="crearNuevaOrden()"
        class="w-full py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors flex items-center justify-center gap-2"
      >
        <i class="pi pi-refresh"></i>
        Cancelar y Crear Nueva Orden
      </button>

      <button
        (click)="cerrarModal()"
        class="w-full py-3 border border-gray-300 hover:border-gray-400 text-gray-700 font-medium rounded-lg transition-colors"
      >
        Cancelar
      </button>
    </div>

    <!-- Info Message -->
    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
      <p class="text-sm text-blue-800">
        <i class="pi pi-info-circle mr-2"></i>
        <strong>Nota:</strong> Solo puedes tener una orden pendiente a la vez. Si cancelas esta orden, el stock ser치 liberado inmediatamente.
      </p>
    </div>
  </div>
</div>
