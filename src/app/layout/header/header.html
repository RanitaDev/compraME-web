@if (1 >= 1) {
  <div class="w-full h-auto flex justify-between items-center pt-4 pb-2">
  <div class="logo">
    <span class="font-bold text-xl text-gray-800 cursor-pointer" (click)="goHome()">CompraME!</span>
  </div>

  <div class="flex items-center flex-1 justify-end">
    <!-- Search Component -->
    <div class="search-container group relative flex items-center">
      <div class="flex items-center h-9 bg-white group-hover:bg-[#e4f6ff] rounded-full transition-all duration-300
                  ease-in-out overflow-hidden group-hover:w-[calc(75vw-320px)] w-9 border border-white group-hover:border-[#527280]/30">
        <div class="flex items-center justify-center w-8.5 h-9 flex-shrink-0">
          <i class="pi pi-search text-[#3f5963] text-lg"></i>
        </div>
        <input
          type="text"
          placeholder="Buscar productos..."
          class="flex-1 bg-transparent border-none outline-none px-3 text-[#527280] placeholder-[#527280]/40 opacity-0
                group-hover:opacity-100 transition-opacity duration-350 ease-in-out"
        />
      </div>
    </div>

    <div class="flex items-center gap-2">
      <!-- Botón del carrito - Solo visible para usuarios autenticados -->
      @if (isAuthenticated) {
        <div class="relative">
          <p-button
            icon="pi pi-shopping-cart"
            rounded
            text
            severity="info"
            styleClass="w-12 h-12 cart-button"
            [class.cart-animated]="cartAnimated"
            [class.cart-has-items]="cartTotalItems > 0"
            (onClick)="abrirCarrito()"
          ></p-button>

          <!-- Badge con cantidad de productos -->
          @if (cartTotalItems > 0) {
            <span class="cart-badge absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center">
              {{ cartTotalItems }}
            </span>
          }
        </div>
      }

      <!-- Usuario autenticado -->
      @if (isAuthenticated && currentUser) {
        <div class="user-section flex items-center gap-3">
          <!-- Saludo con nombre -->
          <span class="text-sm text-gray-600 hidden sm:inline">
            ¡Hola, {{ currentUser.nombre }}!
          </span>

          <!-- Avatar con iniciales -->
          <div class="relative">
            <p-avatar
              [label]="getUserInitials()"
              class="w-12 h-12 cursor-pointer bg-blue-100 text-blue-600"
              shape="circle"
              (click)="goToProfile()">
            </p-avatar>
          </div>
        </div>
      }
      <!-- Usuario no autenticado -->
      @else {
        <div class="auth-section flex items-center gap-2">
          <p-avatar
            icon="pi pi-user text-gray-400"
            class="w-12 h-12 cursor-pointer"
            shape="circle"
            (click)="goToLogin()"
            />
        </div>
      }
    </div>
  </div>
</div>
<div class="border-b border-gray-300"></div>

<app-cart-modal
  (modalClosed)="modalCarritoCerrada()"
  (checkoutRequested)="onCheckout()">
</app-cart-modal>

<app-user-profile-modal
  (modalClosed)="modalPerfilCerrada()"
  (usuarioCerroSesion)="usuarioCerroSesion()">
</app-user-profile-modal>

}
